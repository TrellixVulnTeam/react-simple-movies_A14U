{"ast":null,"code":"import { useEffect, useLayoutEffect, useState, useRef, useCallback } from 'react';\nimport useSWR from 'swr';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nvar noop = function () {}; // Using noop() as the undefined value as undefined can possibly be replaced\n// by something else.  Prettier ignore and extra parentheses are necessary here\n// to ensure that tsc doesn't remove the __NOINLINE__ comment.\n// prettier-ignore\n\n\nvar UNDEFINED =\n/*#__NOINLINE__*/\nnoop();\nvar OBJECT = Object;\n\nvar isUndefined = function (v) {\n  return v === UNDEFINED;\n};\n\nvar isFunction = function (v) {\n  return typeof v == 'function';\n};\n\nvar STR_UNDEFINED = 'undefined'; // NOTE: Use function to guarantee it's re-evaluated between jsdom and node runtime for tests.\n\nvar hasWindow = function () {\n  return typeof window != STR_UNDEFINED;\n};\n\nvar IS_SERVER = !hasWindow() || 'Deno' in window; // React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\n\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect; // use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\n\nvar table = new WeakMap(); // counter of the key\n\nvar counter = 0; // A stable hash implementation that supports:\n// - Fast and ensures unique hash properties\n// - Handles unserializable values\n// - Handles object key ordering\n// - Generates short results\n//\n// This is not a serialization function, and the result is not guaranteed to be\n// parsible.\n\nvar stableHash = function (arg) {\n  var type = typeof arg;\n  var constructor = arg && arg.constructor;\n  var isDate = constructor == Date;\n  var result;\n  var index;\n\n  if (OBJECT(arg) === arg && !isDate && constructor != RegExp) {\n    // Object/function, not null/date/regexp. Use WeakMap to store the id first.\n    // If it's already hashed, directly return the result.\n    result = table.get(arg);\n    if (result) return result; // Store the hash first for circular reference detection before entering the\n    // recursive `stableHash` calls.\n    // For other objects like set and map, we use this id directly as the hash.\n\n    result = ++counter + '~';\n    table.set(arg, result);\n\n    if (constructor == Array) {\n      // Array.\n      result = '@';\n\n      for (index = 0; index < arg.length; index++) {\n        result += stableHash(arg[index]) + ',';\n      }\n\n      table.set(arg, result);\n    }\n\n    if (constructor == OBJECT) {\n      // Object, sort keys.\n      result = '#';\n      var keys = OBJECT.keys(arg).sort();\n\n      while (!isUndefined(index = keys.pop())) {\n        if (!isUndefined(arg[index])) {\n          result += index + ':' + stableHash(arg[index]) + ',';\n        }\n      }\n\n      table.set(arg, result);\n    }\n  } else {\n    result = isDate ? arg.toJSON() : type == 'symbol' ? arg.toString() : type == 'string' ? JSON.stringify(arg) : '' + arg;\n  }\n\n  return result;\n};\n\nvar serialize = function (key) {\n  if (isFunction(key)) {\n    try {\n      key = key();\n    } catch (err) {\n      // dependencies not ready\n      key = '';\n    }\n  }\n\n  var args = [].concat(key); // If key is not falsy, or not an empty array, hash it.\n\n  key = typeof key == 'string' ? key : (Array.isArray(key) ? key.length : key) ? stableHash(key) : '';\n  var infoKey = key ? '$swr$' + key : '';\n  return [key, args, infoKey];\n};\n\nvar normalize = function (args) {\n  return isFunction(args[1]) ? [args[0], args[1], args[2] || {}] : [args[0], null, (args[1] === null ? args[2] : args[1]) || {}];\n}; // Create a custom hook with a middleware\n\n\nvar withMiddleware = function (useSWR, middleware) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var _a = normalize(args),\n        key = _a[0],\n        fn = _a[1],\n        config = _a[2];\n\n    var uses = (config.use || []).concat(middleware);\n    return useSWR(key, fn, __assign(__assign({}, config), {\n      use: uses\n    }));\n  };\n}; // We have to several type castings here because `useSWRInfinite` is a special\n\n\nvar INFINITE_PREFIX = '$inf$';\n\nvar getFirstPageKey = function (getKey) {\n  return serialize(getKey ? getKey(0, null) : null)[0];\n};\n\nvar unstable_serialize = function (getKey) {\n  return INFINITE_PREFIX + getFirstPageKey(getKey);\n};\n\nvar infinite = function (useSWRNext) {\n  return function (getKey, fn, config) {\n    var rerender = useState({})[1];\n    var didMountRef = useRef(false);\n    var dataRef = useRef();\n    var cache = config.cache,\n        _a = config.initialSize,\n        initialSize = _a === void 0 ? 1 : _a,\n        _b = config.revalidateAll,\n        revalidateAll = _b === void 0 ? false : _b,\n        _c = config.persistSize,\n        persistSize = _c === void 0 ? false : _c,\n        _d = config.revalidateFirstPage,\n        revalidateFirstPage = _d === void 0 ? true : _d,\n        _e = config.revalidateOnMount,\n        revalidateOnMount = _e === void 0 ? false : _e; // The serialized key of the first page.\n\n    var firstPageKey = null;\n\n    try {\n      firstPageKey = getFirstPageKey(getKey);\n    } catch (err) {// not ready\n    } // We use cache to pass extra info (context) to fetcher so it can be globally\n    // shared. The key of the context data is based on the first page key.\n\n\n    var contextCacheKey = null; // Page size is also cached to share the page data between hooks with the\n    // same key.\n\n    var pageSizeCacheKey = null;\n\n    if (firstPageKey) {\n      contextCacheKey = '$ctx$' + firstPageKey;\n      pageSizeCacheKey = '$len$' + firstPageKey;\n    }\n\n    var resolvePageSize = useCallback(function () {\n      var cachedPageSize = cache.get(pageSizeCacheKey);\n      return isUndefined(cachedPageSize) ? initialSize : cachedPageSize; // `cache` isn't allowed to change during the lifecycle\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageSizeCacheKey, initialSize]); // keep the last page size to restore it with the persistSize option\n\n    var lastPageSizeRef = useRef(resolvePageSize()); // When the page key changes, we reset the page size if it's not persisted\n\n    useIsomorphicLayoutEffect(function () {\n      if (!didMountRef.current) {\n        didMountRef.current = true;\n        return;\n      }\n\n      if (firstPageKey) {\n        // If the key has been changed, we keep the current page size if persistSize is enabled\n        cache.set(pageSizeCacheKey, persistSize ? lastPageSizeRef.current : initialSize);\n      } // `initialSize` isn't allowed to change during the lifecycle\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    }, [firstPageKey]); // Needs to check didMountRef during mounting, not in the fetcher\n\n    var shouldRevalidateOnMount = revalidateOnMount && !didMountRef.current; // Actual SWR hook to load all pages in one fetcher.\n\n    var swr = useSWRNext(firstPageKey ? INFINITE_PREFIX + firstPageKey : null, function () {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var _a, forceRevalidateAll, originalData, data, pageSize, previousPageData, i, _b, pageKey, pageArgs, pageData, shouldFetchPage;\n\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              _a = cache.get(contextCacheKey) || [], forceRevalidateAll = _a[0], originalData = _a[1];\n              data = [];\n              pageSize = resolvePageSize();\n              previousPageData = null;\n              i = 0;\n              _c.label = 1;\n\n            case 1:\n              if (!(i < pageSize)) return [3\n              /*break*/\n              , 5];\n              _b = serialize(getKey(i, previousPageData)), pageKey = _b[0], pageArgs = _b[1];\n\n              if (!pageKey) {\n                // `pageKey` is falsy, stop fetching new pages.\n                return [3\n                /*break*/\n                , 5];\n              }\n\n              pageData = cache.get(pageKey);\n              shouldFetchPage = revalidateAll || forceRevalidateAll || isUndefined(pageData) || revalidateFirstPage && !i && !isUndefined(dataRef.current) || shouldRevalidateOnMount || originalData && !isUndefined(originalData[i]) && !config.compare(originalData[i], pageData);\n              if (!(fn && shouldFetchPage)) return [3\n              /*break*/\n              , 3];\n              return [4\n              /*yield*/\n              , fn.apply(void 0, pageArgs)];\n\n            case 2:\n              pageData = _c.sent();\n              cache.set(pageKey, pageData);\n              _c.label = 3;\n\n            case 3:\n              data.push(pageData);\n              previousPageData = pageData;\n              _c.label = 4;\n\n            case 4:\n              ++i;\n              return [3\n              /*break*/\n              , 1];\n\n            case 5:\n              // once we executed the data fetching based on the context, clear the context\n              cache.delete(contextCacheKey); // return the data\n\n              return [2\n              /*return*/\n              , data];\n          }\n        });\n      });\n    }, config); // update dataRef\n\n    useIsomorphicLayoutEffect(function () {\n      dataRef.current = swr.data;\n    }, [swr.data]);\n    var mutate = useCallback(function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var data = args[0]; // Default to true.\n\n      var shouldRevalidate = args[1] !== false; // It is possible that the key is still falsy.\n\n      if (!contextCacheKey) return;\n\n      if (shouldRevalidate) {\n        if (!isUndefined(data)) {\n          // We only revalidate the pages that are changed\n          var originalData = dataRef.current;\n          cache.set(contextCacheKey, [false, originalData]);\n        } else {\n          // Calling `mutate()`, we revalidate all pages\n          cache.set(contextCacheKey, [true]);\n        }\n      }\n\n      return args.length ? swr.mutate(data, shouldRevalidate) : swr.mutate();\n    }, // swr.mutate is always the same reference\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [contextCacheKey]); // Function to load pages data from the cache based on the page size.\n\n    var resolvePagesFromCache = function (pageSize) {\n      // return an array of page data\n      var data = [];\n      var previousPageData = null;\n\n      for (var i = 0; i < pageSize; ++i) {\n        var pageKey = serialize(getKey(i, previousPageData))[0]; // Get the cached page data.\n\n        var pageData = pageKey ? cache.get(pageKey) : UNDEFINED; // Return the current data if we can't get it from the cache.\n\n        if (isUndefined(pageData)) return dataRef.current;\n        data.push(pageData);\n        previousPageData = pageData;\n      } // Return the data\n\n\n      return data;\n    }; // Extend the SWR API\n\n\n    var setSize = useCallback(function (arg) {\n      // It is possible that the key is still falsy.\n      if (!pageSizeCacheKey) return;\n      var size;\n\n      if (isFunction(arg)) {\n        size = arg(resolvePageSize());\n      } else if (typeof arg == 'number') {\n        size = arg;\n      }\n\n      if (typeof size != 'number') return;\n      cache.set(pageSizeCacheKey, size);\n      lastPageSizeRef.current = size;\n      rerender({});\n      return mutate(resolvePagesFromCache(size));\n    }, // `cache` and `rerender` isn't allowed to change during the lifecycle\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [pageSizeCacheKey, resolvePageSize, mutate]); // Use getter functions to avoid unnecessary re-renders caused by triggering\n    // all the getters of the returned swr object.\n\n    return {\n      size: resolvePageSize(),\n      setSize: setSize,\n      mutate: mutate,\n\n      get error() {\n        return swr.error;\n      },\n\n      get data() {\n        return swr.data;\n      },\n\n      get isValidating() {\n        return swr.isValidating;\n      }\n\n    };\n  };\n};\n\nvar index = withMiddleware(useSWR, infinite);\nexport { index as default, infinite, unstable_serialize };","map":{"version":3,"names":["useEffect","useLayoutEffect","useState","useRef","useCallback","useSWR","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","noop","UNDEFINED","OBJECT","isUndefined","isFunction","STR_UNDEFINED","hasWindow","window","IS_SERVER","useIsomorphicLayoutEffect","table","WeakMap","counter","stableHash","arg","type","constructor","isDate","Date","index","RegExp","get","set","Array","keys","sort","toJSON","toString","JSON","stringify","serialize","key","err","args","concat","isArray","infoKey","normalize","withMiddleware","middleware","_i","_a","fn","config","uses","use","INFINITE_PREFIX","getFirstPageKey","getKey","unstable_serialize","infinite","useSWRNext","rerender","didMountRef","dataRef","cache","initialSize","_b","revalidateAll","_c","persistSize","_d","revalidateFirstPage","_e","revalidateOnMount","firstPageKey","contextCacheKey","pageSizeCacheKey","resolvePageSize","cachedPageSize","lastPageSizeRef","current","shouldRevalidateOnMount","swr","forceRevalidateAll","originalData","data","pageSize","previousPageData","pageKey","pageArgs","pageData","shouldFetchPage","compare","delete","mutate","shouldRevalidate","resolvePagesFromCache","setSize","size","error","isValidating","default"],"sources":["E:/react-course-project/react-simple-movies/node_modules/swr/infinite/dist/index.mjs"],"sourcesContent":["import { useEffect, useLayoutEffect, useState, useRef, useCallback } from 'react';\nimport useSWR from 'swr';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar noop = function () { };\n// Using noop() as the undefined value as undefined can possibly be replaced\n// by something else.  Prettier ignore and extra parentheses are necessary here\n// to ensure that tsc doesn't remove the __NOINLINE__ comment.\n// prettier-ignore\nvar UNDEFINED = ( /*#__NOINLINE__*/noop());\nvar OBJECT = Object;\nvar isUndefined = function (v) { return v === UNDEFINED; };\nvar isFunction = function (v) { return typeof v == 'function'; };\nvar STR_UNDEFINED = 'undefined';\n// NOTE: Use function to guarantee it's re-evaluated between jsdom and node runtime for tests.\nvar hasWindow = function () { return typeof window != STR_UNDEFINED; };\n\nvar IS_SERVER = !hasWindow() || 'Deno' in window;\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect;\n\n// use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\nvar table = new WeakMap();\n// counter of the key\nvar counter = 0;\n// A stable hash implementation that supports:\n// - Fast and ensures unique hash properties\n// - Handles unserializable values\n// - Handles object key ordering\n// - Generates short results\n//\n// This is not a serialization function, and the result is not guaranteed to be\n// parsible.\nvar stableHash = function (arg) {\n    var type = typeof arg;\n    var constructor = arg && arg.constructor;\n    var isDate = constructor == Date;\n    var result;\n    var index;\n    if (OBJECT(arg) === arg && !isDate && constructor != RegExp) {\n        // Object/function, not null/date/regexp. Use WeakMap to store the id first.\n        // If it's already hashed, directly return the result.\n        result = table.get(arg);\n        if (result)\n            return result;\n        // Store the hash first for circular reference detection before entering the\n        // recursive `stableHash` calls.\n        // For other objects like set and map, we use this id directly as the hash.\n        result = ++counter + '~';\n        table.set(arg, result);\n        if (constructor == Array) {\n            // Array.\n            result = '@';\n            for (index = 0; index < arg.length; index++) {\n                result += stableHash(arg[index]) + ',';\n            }\n            table.set(arg, result);\n        }\n        if (constructor == OBJECT) {\n            // Object, sort keys.\n            result = '#';\n            var keys = OBJECT.keys(arg).sort();\n            while (!isUndefined((index = keys.pop()))) {\n                if (!isUndefined(arg[index])) {\n                    result += index + ':' + stableHash(arg[index]) + ',';\n                }\n            }\n            table.set(arg, result);\n        }\n    }\n    else {\n        result = isDate\n            ? arg.toJSON()\n            : type == 'symbol'\n                ? arg.toString()\n                : type == 'string'\n                    ? JSON.stringify(arg)\n                    : '' + arg;\n    }\n    return result;\n};\n\nvar serialize = function (key) {\n    if (isFunction(key)) {\n        try {\n            key = key();\n        }\n        catch (err) {\n            // dependencies not ready\n            key = '';\n        }\n    }\n    var args = [].concat(key);\n    // If key is not falsy, or not an empty array, hash it.\n    key =\n        typeof key == 'string'\n            ? key\n            : (Array.isArray(key) ? key.length : key)\n                ? stableHash(key)\n                : '';\n    var infoKey = key ? '$swr$' + key : '';\n    return [key, args, infoKey];\n};\n\nvar normalize = function (args) {\n    return isFunction(args[1])\n        ? [args[0], args[1], args[2] || {}]\n        : [args[0], null, (args[1] === null ? args[2] : args[1]) || {}];\n};\n\n// Create a custom hook with a middleware\nvar withMiddleware = function (useSWR, middleware) {\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var _a = normalize(args), key = _a[0], fn = _a[1], config = _a[2];\n        var uses = (config.use || []).concat(middleware);\n        return useSWR(key, fn, __assign(__assign({}, config), { use: uses }));\n    };\n};\n\n// We have to several type castings here because `useSWRInfinite` is a special\nvar INFINITE_PREFIX = '$inf$';\nvar getFirstPageKey = function (getKey) {\n    return serialize(getKey ? getKey(0, null) : null)[0];\n};\nvar unstable_serialize = function (getKey) {\n    return INFINITE_PREFIX + getFirstPageKey(getKey);\n};\nvar infinite = (function (useSWRNext) {\n    return function (getKey, fn, config) {\n        var rerender = useState({})[1];\n        var didMountRef = useRef(false);\n        var dataRef = useRef();\n        var cache = config.cache, _a = config.initialSize, initialSize = _a === void 0 ? 1 : _a, _b = config.revalidateAll, revalidateAll = _b === void 0 ? false : _b, _c = config.persistSize, persistSize = _c === void 0 ? false : _c, _d = config.revalidateFirstPage, revalidateFirstPage = _d === void 0 ? true : _d, _e = config.revalidateOnMount, revalidateOnMount = _e === void 0 ? false : _e;\n        // The serialized key of the first page.\n        var firstPageKey = null;\n        try {\n            firstPageKey = getFirstPageKey(getKey);\n        }\n        catch (err) {\n            // not ready\n        }\n        // We use cache to pass extra info (context) to fetcher so it can be globally\n        // shared. The key of the context data is based on the first page key.\n        var contextCacheKey = null;\n        // Page size is also cached to share the page data between hooks with the\n        // same key.\n        var pageSizeCacheKey = null;\n        if (firstPageKey) {\n            contextCacheKey = '$ctx$' + firstPageKey;\n            pageSizeCacheKey = '$len$' + firstPageKey;\n        }\n        var resolvePageSize = useCallback(function () {\n            var cachedPageSize = cache.get(pageSizeCacheKey);\n            return isUndefined(cachedPageSize) ? initialSize : cachedPageSize;\n            // `cache` isn't allowed to change during the lifecycle\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [pageSizeCacheKey, initialSize]);\n        // keep the last page size to restore it with the persistSize option\n        var lastPageSizeRef = useRef(resolvePageSize());\n        // When the page key changes, we reset the page size if it's not persisted\n        useIsomorphicLayoutEffect(function () {\n            if (!didMountRef.current) {\n                didMountRef.current = true;\n                return;\n            }\n            if (firstPageKey) {\n                // If the key has been changed, we keep the current page size if persistSize is enabled\n                cache.set(pageSizeCacheKey, persistSize ? lastPageSizeRef.current : initialSize);\n            }\n            // `initialSize` isn't allowed to change during the lifecycle\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [firstPageKey]);\n        // Needs to check didMountRef during mounting, not in the fetcher\n        var shouldRevalidateOnMount = revalidateOnMount && !didMountRef.current;\n        // Actual SWR hook to load all pages in one fetcher.\n        var swr = useSWRNext(firstPageKey ? INFINITE_PREFIX + firstPageKey : null, function () { return __awaiter(void 0, void 0, void 0, function () {\n            var _a, forceRevalidateAll, originalData, data, pageSize, previousPageData, i, _b, pageKey, pageArgs, pageData, shouldFetchPage;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = cache.get(contextCacheKey) || [], forceRevalidateAll = _a[0], originalData = _a[1];\n                        data = [];\n                        pageSize = resolvePageSize();\n                        previousPageData = null;\n                        i = 0;\n                        _c.label = 1;\n                    case 1:\n                        if (!(i < pageSize)) return [3 /*break*/, 5];\n                        _b = serialize(getKey(i, previousPageData)), pageKey = _b[0], pageArgs = _b[1];\n                        if (!pageKey) {\n                            // `pageKey` is falsy, stop fetching new pages.\n                            return [3 /*break*/, 5];\n                        }\n                        pageData = cache.get(pageKey);\n                        shouldFetchPage = revalidateAll ||\n                            forceRevalidateAll ||\n                            isUndefined(pageData) ||\n                            (revalidateFirstPage && !i && !isUndefined(dataRef.current)) ||\n                            shouldRevalidateOnMount ||\n                            (originalData &&\n                                !isUndefined(originalData[i]) &&\n                                !config.compare(originalData[i], pageData));\n                        if (!(fn && shouldFetchPage)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, fn.apply(void 0, pageArgs)];\n                    case 2:\n                        pageData = _c.sent();\n                        cache.set(pageKey, pageData);\n                        _c.label = 3;\n                    case 3:\n                        data.push(pageData);\n                        previousPageData = pageData;\n                        _c.label = 4;\n                    case 4:\n                        ++i;\n                        return [3 /*break*/, 1];\n                    case 5:\n                        // once we executed the data fetching based on the context, clear the context\n                        cache.delete(contextCacheKey);\n                        // return the data\n                        return [2 /*return*/, data];\n                }\n            });\n        }); }, config);\n        // update dataRef\n        useIsomorphicLayoutEffect(function () {\n            dataRef.current = swr.data;\n        }, [swr.data]);\n        var mutate = useCallback(function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var data = args[0];\n            // Default to true.\n            var shouldRevalidate = args[1] !== false;\n            // It is possible that the key is still falsy.\n            if (!contextCacheKey)\n                return;\n            if (shouldRevalidate) {\n                if (!isUndefined(data)) {\n                    // We only revalidate the pages that are changed\n                    var originalData = dataRef.current;\n                    cache.set(contextCacheKey, [false, originalData]);\n                }\n                else {\n                    // Calling `mutate()`, we revalidate all pages\n                    cache.set(contextCacheKey, [true]);\n                }\n            }\n            return args.length ? swr.mutate(data, shouldRevalidate) : swr.mutate();\n        }, \n        // swr.mutate is always the same reference\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [contextCacheKey]);\n        // Function to load pages data from the cache based on the page size.\n        var resolvePagesFromCache = function (pageSize) {\n            // return an array of page data\n            var data = [];\n            var previousPageData = null;\n            for (var i = 0; i < pageSize; ++i) {\n                var pageKey = serialize(getKey(i, previousPageData))[0];\n                // Get the cached page data.\n                var pageData = pageKey ? cache.get(pageKey) : UNDEFINED;\n                // Return the current data if we can't get it from the cache.\n                if (isUndefined(pageData))\n                    return dataRef.current;\n                data.push(pageData);\n                previousPageData = pageData;\n            }\n            // Return the data\n            return data;\n        };\n        // Extend the SWR API\n        var setSize = useCallback(function (arg) {\n            // It is possible that the key is still falsy.\n            if (!pageSizeCacheKey)\n                return;\n            var size;\n            if (isFunction(arg)) {\n                size = arg(resolvePageSize());\n            }\n            else if (typeof arg == 'number') {\n                size = arg;\n            }\n            if (typeof size != 'number')\n                return;\n            cache.set(pageSizeCacheKey, size);\n            lastPageSizeRef.current = size;\n            rerender({});\n            return mutate(resolvePagesFromCache(size));\n        }, \n        // `cache` and `rerender` isn't allowed to change during the lifecycle\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [pageSizeCacheKey, resolvePageSize, mutate]);\n        // Use getter functions to avoid unnecessary re-renders caused by triggering\n        // all the getters of the returned swr object.\n        return {\n            size: resolvePageSize(),\n            setSize: setSize,\n            mutate: mutate,\n            get error() {\n                return swr.error;\n            },\n            get data() {\n                return swr.data;\n            },\n            get isValidating() {\n                return swr.isValidating;\n            }\n        };\n    };\n});\nvar index = withMiddleware(useSWR, infinite);\n\nexport { index as default, infinite, unstable_serialize };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}